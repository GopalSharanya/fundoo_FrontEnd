var should = require('should');

describe('Ninjazord External Server Test', function(){
	
	it('should respond to local requests', function(done){
		var ninjazord = require('../index');
		ninjazord.should.be.a('object');
		ninjazord.setPrefix('tests.');
		ninjazord.createObject('tests',{ testOne : 'nonone'}, function(object){
			object.should.be.a('object');
			object.id.should.be.a('number');
			done();
		});
	});

	it('should read from process.REDIS_PORT && process.REDIS_HOST', function(done){
		process.REDIS_PORT = 6379;
		process.REDIS_HOST = '127.0.0.1';
		var ninjazord = require('../index');
		ninjazord.should.be.a('object');
		ninjazord.setPrefix('tests.');
		ninjazord.createObject('tests',{ testOne : 'nonone'}, function(object){
			object.should.be.a('object');
			object.id.should.be.a('number');
			ninjazord.nukeNamespace('tests.', function(){
				done();
			});
		});
	});

});
